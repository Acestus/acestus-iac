name: Deploy to stg

on:
  push:
    branches:
      - stg
    paths-ignore:
      - "**/*.md"
  workflow_dispatch:

permissions:
  id-token: write
  contents: read

jobs:
  deploy-to-stg:
    # Replace with your reusable workflow or inline the deployment steps
    # uses: your-org/your-repo/.github/workflows/aks-deploy-dotnet.yaml@main
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # Example: Add your deployment steps here

    # Example configuration (replace with your values):
    # with:
    #     environment: stg
    #     azure_tenant_id: ${{ vars.AZURE_TENANT_ID }}
    #     azure_client_id: ${{ vars.AZURE_CLIENT_ID_STG }}
    #     azure_subscription_id: ${{ vars.AZURE_SUBSCRIPTION_ID }}
    #     resource_group_name: rg-timelogger-stg-ncus-001
    #     stack_name: stack-timelogger-stg-ncus-001
    #     template_file: infrastructure/main.bicep
    #     params_file: infrastructure/main.stg.bicepparam
    #     acr_name: <your-acr-name>
    #     aks_cluster_name: aks-timelogger-stg-ncus-001
    #     k8s_namespace: default
    #     storage_account_name: sttimeloggerstgncus001
    #     applications_json: |
    #         [
    #           {
    #             "path": "api-traffic",
    #             "name": "api-traffic",
    #             "image": "api-traffic",
    #             "dockerfile": "Dockerfile"
    #           },
    #           {
    #             "path": "time-logger",
    #             "name": "time-logger",
    #             "image": "time-logger",
    #             "dockerfile": "Dockerfile"
    #           },
    #           {
    #             "path": "fabric-sync",
    #             "name": "fabric-sync",
    #             "image": "fabric-sync",
    #             "dockerfile": "Dockerfile"
    #           }
    #         ]
